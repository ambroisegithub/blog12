{"version":3,"file":"user.js","names":["USerSchema","mongoose","Schema","name","type","String","required","email","unique","lowercase","validator","isEmail","password","minLength","maxLength","select","role","pre","next","user","isModified","bcrypt","hash","methods","correctPassword","cpassword","compare","model"],"sources":["../../../src/models/user.js"],"sourcesContent":["import mongoose  from \"mongoose\"\nimport validator from \"validator\"\nimport bcrypt from \"bcryptjs\"\nconst USerSchema = new mongoose.Schema({\n  name: {\n    type: String,\n    required: [true, \"the name is required\"],\n  },\n  email: {\n    type: String,\n    unique: true,\n    lowercase: true,\n    validator: [validator.isEmail, \"please provide the valid email\"],\n  },\n  password: {\n    type: String,\n    minLength: 6,\n    maxLength: 12,\n    select: false,\n    required: [true, \"please the passsword field required\"],\n  },\n\n  role: {\n    type: String,\n    enum: [\"user\", \"admin\"],\n    default: \"user\",\n  },\n});\n\nUSerSchema.pre(\"save\", async function (next) {\n  const user = this;\n  if (!user.isModified(\"password\")) return next();\n  user.password = await bcrypt.hash(user.password, 10);\n  next();\n});\n\nUSerSchema.methods.correctPassword = async function (cpassword, password) {\n  return await bcrypt.compare(cpassword, password);\n};\n\nconst user = mongoose.model(\"User\", USerSchema);\n\nexport default user;\n"],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA,IAAMA,UAAU,GAAG,IAAIC,oBAAQ,CAACC,MAAM,CAAC;EACrCC,IAAI,EAAE;IACJC,IAAI,EAAEC,MAAM;IACZC,QAAQ,EAAE,CAAC,IAAI,EAAE,sBAAsB;EACzC,CAAC;EACDC,KAAK,EAAE;IACLH,IAAI,EAAEC,MAAM;IACZG,MAAM,EAAE,IAAI;IACZC,SAAS,EAAE,IAAI;IACfC,SAAS,EAAE,CAACA,qBAAS,CAACC,OAAO,EAAE,gCAAgC;EACjE,CAAC;EACDC,QAAQ,EAAE;IACRR,IAAI,EAAEC,MAAM;IACZQ,SAAS,EAAE,CAAC;IACZC,SAAS,EAAE,EAAE;IACbC,MAAM,EAAE,KAAK;IACbT,QAAQ,EAAE,CAAC,IAAI,EAAE,qCAAqC;EACxD,CAAC;EAEDU,IAAI,EAAE;IACJZ,IAAI,EAAEC,MAAM;IACZ,QAAM,CAAC,MAAM,EAAE,OAAO,CAAC;IACvB,WAAS;EACX;AACF,CAAC,CAAC;AAEFL,UAAU,CAACiB,GAAG,CAAC,MAAM;EAAA,yFAAE,iBAAgBC,IAAI;IAAA;IAAA;MAAA;QAAA;UACnCC,IAAI,GAAG,IAAI;UAAA,IACZA,IAAI,CAACC,UAAU,CAAC,UAAU,CAAC;YAAA;YAAA;UAAA;UAAA,iCAASF,IAAI,EAAE;QAAA;UAAA;UAAA,OACzBG,oBAAM,CAACC,IAAI,CAACH,IAAI,CAACP,QAAQ,EAAE,EAAE,CAAC;QAAA;UAApDO,IAAI,CAACP,QAAQ;UACbM,IAAI,EAAE;QAAC;QAAA;UAAA;MAAA;IAAA;EAAA,CACR;EAAA;IAAA;EAAA;AAAA,IAAC;AAEFlB,UAAU,CAACuB,OAAO,CAACC,eAAe;EAAA,0FAAG,kBAAgBC,SAAS,EAAEb,QAAQ;IAAA;MAAA;QAAA;UAAA;UAAA,OACzDS,oBAAM,CAACK,OAAO,CAACD,SAAS,EAAEb,QAAQ,CAAC;QAAA;UAAA;QAAA;QAAA;UAAA;MAAA;IAAA;EAAA,CACjD;EAAA;IAAA;EAAA;AAAA;AAED,IAAMO,IAAI,GAAGlB,oBAAQ,CAAC0B,KAAK,CAAC,MAAM,EAAE3B,UAAU,CAAC;AAAC,eAEjCmB,IAAI;AAAA"}